# æ‚£è€…åˆ—è¡¨ç»„ä»¶å¿«é€Ÿå‚è€ƒ

## ğŸ“¦ ç»„ä»¶æ¸…å•

| ç»„ä»¶ | è·¯å¾„ | ç”¨é€” |
|------|------|------|
| **PatientListPanel** | `components/PatientListPanel.vue` | å·¦ä¾§æ‚£è€…åˆ—è¡¨é¢æ¿ |
| **PatientInfoBar** | `components/PatientInfoBar.vue` | é¡¶éƒ¨æ‚£è€…ä¿¡æ¯æ  |
| **usePatientData** | `composables/usePatientData.js` | æ‚£è€…æ•°æ®ç®¡ç† |

---

## âš¡ å¿«é€Ÿå¼€å§‹

```vue
<script setup>
import PatientListPanel from '@/components/PatientListPanel.vue';
import PatientInfoBar from '@/components/PatientInfoBar.vue';
import { usePatientData } from '@/composables/usePatientData';

// 1ï¸âƒ£ ä½¿ç”¨ composable
const {
  patientList,              // æ‚£è€…åˆ—è¡¨
  selectedPatients,         // é€‰ä¸­çš„æ‚£è€…
  enableMultiSelect,        // æ˜¯å¦å¤šé€‰
  currentScheduledWardId,   // å½“å‰ç—…åŒº
  initializePatientData,    // åˆå§‹åŒ–
  selectPatient,            // é€‰æ‹©æ‚£è€…
  toggleMultiSelectMode     // åˆ‡æ¢å¤šé€‰
} = usePatientData();

// 2ï¸âƒ£ åˆå§‹åŒ–æ•°æ®
onMounted(async () => {
  await initializePatientData();
});

// 3ï¸âƒ£ å¤„ç†äº‹ä»¶
const handlePatientSelect = ({ patient, isMultiSelect }) => {
  selectPatient(patient, isMultiSelect);
  // åŠ è½½ä½ çš„ä¸šåŠ¡æ•°æ®...
};
</script>

<template>
  <div class="page">
    <!-- 4ï¸âƒ£ ä½¿ç”¨ç»„ä»¶ -->
    <PatientListPanel
      :patient-list="patientList"
      :selected-patients="selectedPatients"
      :my-ward-id="currentScheduledWardId"
      @patient-select="handlePatientSelect"
    />
    
    <div class="work-area">
      <PatientInfoBar
        :patients="selectedPatients"
        :is-multi-select="enableMultiSelect"
      />
      
      <!-- ä½ çš„å†…å®¹ -->
    </div>
  </div>
</template>
```

---

## ğŸ¨ æ ¸å¿ƒæ ·å¼å‚æ•°

### PatientListPanel

```css
/* é¢œè‰² */
--primary-color: #409eff;    /* ä¸»è‰² */
--danger-color: #f56c6c;     /* çº¢ç‚¹ */

/* å°ºå¯¸ */
width: 250px;                /* å±•å¼€å®½åº¦ */
width: 40px;                 /* æŠ˜å å®½åº¦ */

/* å­—ä½“ */
.panel-title: 1rem, 600;     /* æ ‡é¢˜ */
.p-name: 1rem, 600;          /* å§“å */
.bed-badge: 0.75rem, bold;   /* åºŠå· */
```

### PatientInfoBar

```css
/* å­—ä½“ */
.name: 1.2rem, bold;         /* å§“å */
.patient-badge: 1.1rem, bold;/* åºŠå· */
.count-badge: 1.2rem, bold;  /* æ•°é‡ */

/* é—´è· */
padding: 15px 25px;
gap: 16px;
border-left: 5px solid #409eff;
```

---

## ğŸ”§ Props é€ŸæŸ¥

### PatientListPanel

| Prop | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ |
|------|------|------|--------|
| `patient-list` | Array | âœ… | `[]` |
| `selected-patients` | Array | âœ… | `[]` |
| `my-ward-id` | String | âŒ | `''` |
| `title` | String | âŒ | `'æ‚£è€…åˆ—è¡¨'` |
| `show-ward-filter` | Boolean | âŒ | `true` |
| `show-pending-filter` | Boolean | âŒ | `true` |
| `enable-multi-select-mode` | Boolean | âŒ | `true` |

### PatientInfoBar

| Prop | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ |
|------|------|------|--------|
| `patients` | Array | âœ… | `[]` |
| `is-multi-select` | Boolean | âŒ | `false` |
| `sort-by` | String | âŒ | `'time'` |
| `show-sort-control` | Boolean | âŒ | `true` |

---

## ğŸ“¤ Events é€ŸæŸ¥

### PatientListPanel

```javascript
@patient-select="({ patient, isMultiSelect, isCheckboxClick }) => {}"
@multi-select-toggle="(enabled) => {}"
@update:collapsed="(collapsed) => {}"
```

### PatientInfoBar

```javascript
@sort-change="(sortBy) => {}"  // 'time' | 'patient'
```

---

## ğŸ’¡ å¸¸è§ç”¨æ³•

### 1. åŸºç¡€ç”¨æ³•ï¼ˆé»˜è®¤é…ç½®ï¼‰
```vue
<PatientListPanel
  :patient-list="patientList"
  :selected-patients="selectedPatients"
  @patient-select="handleSelect"
/>
```

### 2. ä»…å•é€‰æ¨¡å¼
```vue
<PatientListPanel
  :patient-list="patientList"
  :selected-patients="selectedPatients"
  :enable-multi-select-mode="false"
  @patient-select="handleSelect"
/>
```

### 3. éšè—ç­›é€‰é€‰é¡¹
```vue
<PatientListPanel
  :patient-list="patientList"
  :selected-patients="selectedPatients"
  :show-ward-filter="false"
  :show-pending-filter="false"
  @patient-select="handleSelect"
/>
```

### 4. è‡ªå®šä¹‰æ–‡æœ¬
```vue
<PatientListPanel
  :patient-list="patientList"
  :selected-patients="selectedPatients"
  title="æˆ‘çš„æ‚£è€…"
  search-placeholder="æœç´¢æ‚£è€…"
  empty-text="æš‚æ— åˆ†é…çš„æ‚£è€…"
  @patient-select="handleSelect"
/>
```

### 5. ä¿¡æ¯æ æ— æ’åºæ§åˆ¶
```vue
<PatientInfoBar
  :patients="selectedPatients"
  :show-sort-control="false"
/>
```

---

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æ£€æŸ¥æ‚£è€…æ•°æ®æ ¼å¼
```javascript
console.log('æ‚£è€…åˆ—è¡¨:', patientList.value);
// æ¯ä¸ªæ‚£è€…åº”åŒ…å«:
// { patientId, patientName, bedId, gender, age, 
//   weight, nursingGrade, wardId, wardName, unacknowledgedCount }
```

### 2. æ£€æŸ¥é€‰ä¸­çŠ¶æ€
```javascript
console.log('é€‰ä¸­æ‚£è€…:', selectedPatients.value);
console.log('å¤šé€‰æ¨¡å¼:', enableMultiSelect.value);
```

### 3. æ£€æŸ¥ API è°ƒç”¨
```javascript
// åœ¨ composable ä¸­æ·»åŠ æ—¥å¿—
console.log('âœ… åŠ è½½æ‚£è€…åˆ—è¡¨æˆåŠŸ:', patientList.value.length);
console.log('âœ… å½“å‰æ’ç­ç—…åŒº:', currentScheduledWardId.value);
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q: ç»„ä»¶ä¸æ˜¾ç¤ºï¼Ÿ
**A**: æ£€æŸ¥ `patient-list` å’Œ `selected-patients` æ˜¯å¦æ­£ç¡®ä¼ é€’

### Q: æ ·å¼ä¸å¯¹ï¼Ÿ
**A**: ç¡®ä¿ Element Plus å·²æ­£ç¡®å®‰è£…å’Œå¼•å…¥

### Q: äº‹ä»¶ä¸è§¦å‘ï¼Ÿ
**A**: æ£€æŸ¥äº‹ä»¶åç§°æ˜¯å¦æ­£ç¡®ï¼ˆkebab-caseï¼‰

### Q: API è°ƒç”¨å¤±è´¥ï¼Ÿ
**A**: æ£€æŸ¥ `api/orderAcknowledgement.js` ä¸­çš„æ¥å£æ˜¯å¦å¯ç”¨

### Q: ç”¨æˆ·ä¿¡æ¯ä¸ºç©ºï¼Ÿ
**A**: æ£€æŸ¥ `localStorage.getItem('userInfo')` æ˜¯å¦å­˜åœ¨

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

- ğŸ“– [æ‚£è€…åˆ—è¡¨ç»„ä»¶ä½¿ç”¨æŒ‡å—.md](./æ‚£è€…åˆ—è¡¨ç»„ä»¶ä½¿ç”¨æŒ‡å—.md)
- ğŸ“„ [OrderAcknowledgement_é‡æ„ç¤ºä¾‹.vue](./OrderAcknowledgement_é‡æ„ç¤ºä¾‹.vue)
- ğŸ“ [é‡æ„æ€»ç»“.md](./é‡æ„æ€»ç»“.md)

---

## ğŸ¯ é€‚ç”¨åœºæ™¯

- âœ… åŒ»å˜±ç­¾æ”¶
- âœ… ç”¨è¯è®°å½•
- âœ… ç”Ÿå‘½ä½“å¾å½•å…¥
- âœ… æŠ¤ç†è®°å½•
- âœ… æ‚£è€…äº¤æ¥ç­
- âœ… æ£€æŸ¥ç”³è¯·
- âœ… æ‰‹æœ¯å‡†å¤‡

ä»»ä½•éœ€è¦é€‰æ‹©æ‚£è€…çš„é¡µé¢éƒ½å¯ä»¥ä½¿ç”¨ï¼
